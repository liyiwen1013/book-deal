(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-35a2f50f"],{"0119":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-aside",{staticStyle:{width:"200px","margin-top":"20px"}},[a("SideMenu",{ref:"sideMenu",on:{indexSelect:e.indexSelect}})],1),a("el-main",[a("books",{ref:"booksArea",staticClass:"books-area",attrs:{books:""}})],1)],1)},n=[],i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticClass:"categories"},[a("el-col",{attrs:{span:12}},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"2","background-color":"white","text-color":"black","active-text-color":"#409EFF"}},[a("el-menu-item",{attrs:{index:"0"},on:{click:function(t){return e.indexSelect("0")}}},[a("i",{staticClass:"el-icon-s-grid"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("全部")])]),a("el-submenu",{attrs:{index:"1"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-watermelon"}),a("span",[e._v("教材")])]),a("el-menu-item",{attrs:{index:"1-1"},on:{click:function(t){return e.indexSelect("1-1")}}},[e._v("基础学科")]),a("el-submenu",{attrs:{index:"1-2"}},[a("template",{slot:"title"},[e._v("专业课")]),a("el-cascader",{attrs:{options:e.options,props:{expandTrigger:"hover"}},on:{change:e.handleChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],2)],2),a("el-submenu",{attrs:{index:"2"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-grape"}),a("span",[e._v("小说")])]),a("el-menu-item-group",[a("el-menu-item",{attrs:{index:"2-1"},on:{click:function(t){return e.indexSelect("2-1")}}},[e._v("名著")]),a("el-menu-item",{attrs:{index:"2-2"},on:{click:function(t){return e.indexSelect("2-2")}}},[e._v("课外读物")])],1)],2),a("el-submenu",{attrs:{index:"3"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-watermelon"}),a("span",[e._v("考研资料")])]),a("el-menu-item-group",[a("el-menu-item",{attrs:{index:"3-1"},on:{click:function(t){return e.indexSelect("3-1")}}},[e._v("数学")]),a("el-menu-item",{attrs:{index:"3-2"},on:{click:function(t){return e.indexSelect("3-2")}}},[e._v("英语")]),a("el-menu-item",{attrs:{index:"3-3"},on:{click:function(t){return e.indexSelect("3-3")}}},[e._v("政治")]),a("el-submenu",{attrs:{index:"3-4"}},[a("template",{slot:"title"},[e._v("专业课")]),a("el-cascader",{attrs:{options:e.MBAoptions,props:{expandTrigger:"hover"}},on:{change:e.handleChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],2)],1)],2),a("el-menu-item",{attrs:{index:"4"},on:{click:function(t){return e.indexSelect("4")}}},[a("i",{staticClass:"el-icon-orange"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("计算机资料")])]),a("el-submenu",{attrs:{index:"5"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-apple"}),a("span",[e._v("英语")])]),a("el-menu-item-group",[a("el-menu-item",{attrs:{index:"5-1"},on:{click:function(t){return e.indexSelect("5-1")}}},[e._v("四级")]),a("el-menu-item",{attrs:{index:"5-2"},on:{click:function(t){return e.indexSelect("5-2")}}},[e._v("六级")]),a("el-menu-item",{attrs:{index:"5-3"},on:{click:function(t){return e.indexSelect("5-3")}}},[e._v("读物")]),a("el-menu-item",{attrs:{index:"5-4"},on:{click:function(t){return e.indexSelect("5-4")}}},[e._v("其他")])],1)],2),a("el-menu-item",{attrs:{index:"6"},on:{click:function(t){return e.indexSelect("6")}}},[a("i",{staticClass:"el-icon-ice-cream-round"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("励志类")])]),a("el-menu-item",{attrs:{index:"7"},on:{click:function(t){return e.indexSelect("7")}}},[a("i",{staticClass:"el-icon-pear"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("心理学")])])],1)],1)],1)},s=[],o={name:"SideMenu",data:function(){return{value:[],options:[{value:"1-2-1",label:"工学",children:[{value:"1-2-1-1",label:"环安"},{value:"1-2-1-2",label:"机械"},{value:"1-2-1-3",label:"农机"},{value:"1-2-1-4",label:"能动"},{value:"1-2-1-5",label:"材料"},{value:"1-2-1-6",label:"食品"},{value:"1-2-1-7",label:"电气"},{value:"1-2-1-8",label:"车辆"},{value:"1-2-1-9",label:"计算机"},{value:"1-2-1-10",label:"化工"}]},{value:"1-2-2",label:"理学"},{value:"1-2-3",label:"文学",children:[{value:"1-2-3-1",label:"文学"},{value:"1-2-3-2",label:"法学"},{value:"1-2-3-3",label:"外国语"},{value:"1-2-3-4",label:"马克思"}]},{value:"1-2-4",label:"教育学"},{value:"1-2-5",label:"经济学"},{value:"1-2-6",label:"艺术学"},{value:"1-2-7",label:"管理学"},{value:"1-2-8",label:"医学"}],MBAoptions:[{value:"3-4-1",label:"工学",children:[{value:"3-4-1-1",label:"环安"},{value:"3-4-1-2",label:"机械"},{value:"3-4-1-3",label:"农机"},{value:"3-4-1-4",label:"能动"},{value:"3-4-1-5",label:"材料"},{value:"3-4-1-6",label:"食品"},{value:"3-4-1-7",label:"电气"},{value:"3-4-1-8",label:"车辆"},{value:"3-4-1-9",label:"计算机"},{value:"3-4-1-10",label:"化工"}]},{value:"3-4-2",label:"理学"},{value:"3-4-3",label:"文学",children:[{value:"3-4-3-1",label:"文学"},{value:"3-4-3-2",label:"法学"},{value:"3-4-3-3",label:"外国语"},{value:"3-4-3-4",label:"马克思"}]},{value:"3-4-4",label:"教育学"},{value:"3-4-5",label:"经济学"},{value:"3-4-6",label:"艺术学"},{value:"3-4-7",label:"管理学"},{value:"3-4-8",label:"医学"}]}},methods:{handleChange:function(e){var t=0;switch(e.length){case 1:t=0;break;case 2:t=1;break;case 3:t=2;break;case 4:t=3;break}this.indexSelect(e[t])},indexSelect:function(e){this.$emit("indexSelect",e)}}},c=o,r=(a("613f"),a("2877")),u=Object(r["a"])(c,i,s,!1,null,"011b9133",null),d=u.exports,v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{staticStyle:{height:"840px"}},[a("search-bar",{ref:"searchBar",on:{onSearch:e.searchResult}}),e._l(e.books.slice((e.currentPage-1)*e.pageSize,e.currentPage*e.pageSize),(function(t){return a("el-tooltip",{key:t.id,attrs:{effect:"dark",placement:"right"}},[a("p",{staticStyle:{"font-size":"14px","margin-bottom":"6px"},attrs:{slot:"content"},slot:"content"},[e._v("《"+e._s(t.title)+"》")]),a("p",{staticStyle:{"font-size":"13px","margin-bottom":"6px"},attrs:{slot:"content"},slot:"content"},[a("span",[e._v(e._s(t.author))]),e._v(" / "),a("span",[e._v(e._s(t.date))]),e._v(" / "),a("span",[e._v(e._s(t.price)+"元")])]),a("el-card",{staticClass:"book",staticStyle:{width:"135px","margin-bottom":"20px",height:"233px",float:"left","margin-right":"15px"},attrs:{bodyStyle:"padding:10px",shadow:"hover"}},[a("router-link",{staticClass:"cover",attrs:{target:"_blank",to:{name:e.BookMsg,query:{title:t.title,cover:t.cover,price:t.price,author:t.author,date:t.date,newOld:t.newOld,contact:t.contact,phone:t.phone,qq:t.qq,weChat:t.weChat,abs:t.abs,img_1:t.img_1,img_2:t.img_2,img_3:t.img_3,img_4:t.img_4,img_5:t.img_5}}},nativeOn:{click:function(a){return e.sendBookMsg(t)}}},[a("img",{attrs:{src:t.cover,alt:"封面"}})]),a("div",{staticClass:"info"},[a("div",{staticClass:"title"},[a("a",{attrs:{href:""}},[e._v(e._s(t.title))])])]),a("div",{staticClass:"author",staticStyle:{color:"#ee231e"}},[e._v(e._s(t.price)+"元 ")])],1)],1)}))],2),a("el-row",[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,total:e.books.length},on:{"current-change":e.handleCurrentChange}})],1)],1)},m=[],h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"margin-bottom":"30px",display:"flex","justify-content":"center","align-items":"center"}},[a("el-input",{staticStyle:{width:"400px","margin-right":"10px"},attrs:{placeholder:"通过书名搜索...","prefix-icon":"el-icon-search",size:"small",autofocus:"autofocus"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchClick(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.searchClick}},[e._v("搜索")])],1)},p=[],b={name:"SearchBar",data:function(){return{keywords:"",books:[],cardLoading:[]}},methods:{searchClick:function(){this.$emit("onSearch")}}},f=b,g=Object(r["a"])(f,h,p,!1,null,"0d1571a8",null),x=g.exports,k={name:"Books",components:{SearchBar:x},data:function(){return{books:[],currentPage:1,pageSize:18,BookMsg:"BookMsg"}},mounted:function(){var e=this;this.loadBooks(),this.$bus.on("changeCurrentPage",(function(t){e.currentPage=t}))},destroyed:function(){this.$bus.off("changeCurrentPage")},methods:{loadBooks:function(){var e=this;this.$axios.get("/books").then((function(t){t&&200===t.status&&(e.books=t.data)}))},handleCurrentChange:function(e){this.currentPage=e},searchResult:function(){var e=this;this.$axios({method:"post",url:"/search",params:{keywords:this.$refs.searchBar.keywords}}).then((function(t){t&&200===t.status&&(e.books=t.data)}))},deleteBook:function(e){var t=this;this.$confirm("此操作将永久删除该书籍, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$axios.post("/delete",{id:e}).then((function(e){e&&200===e.status&&(200===e.data.code?(t.$message({showClose:!0,type:"success",message:"删除成功"}),t.loadBooks()):(t.$message({showClose:!0,type:"waring",message:"删除失败，该图书已被删除"}),t.loadBooks()))}))})).catch((function(){t.$message({showClose:!0,type:"info",message:"已取消删除"})}))},sendBookMsg:function(e){this.$bus.emit("bookMsg",e.title)}}},_=k,S=(a("8d67"),Object(r["a"])(_,v,m,!1,null,"3a2cd83b",null)),C=S.exports,y={name:"Library",components:{SideMenu:d,Books:C},methods:{indexSelect:function(e){var t=this,a="categories/"+e+"/books";this.$axios.get(a).then((function(e){e&&200===e.status&&(t.$refs.booksArea.books=e.data,t.$bus.emit("changeCurrentPage",1))}))}}},w=y,B=(a("f0e5"),Object(r["a"])(w,l,n,!1,null,"4d6a766e",null));t["default"]=B.exports},6072:function(e,t,a){},"613f":function(e,t,a){"use strict";var l=a("6072"),n=a.n(l);n.a},"8d67":function(e,t,a){"use strict";var l=a("e0a5"),n=a.n(l);n.a},c526:function(e,t,a){},e0a5:function(e,t,a){},f0e5:function(e,t,a){"use strict";var l=a("c526"),n=a.n(l);n.a}}]);